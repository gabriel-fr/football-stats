{"ast":null,"code":"import _regeneratorRuntime from\"C:/GIT/teste.estudos/Aleatorios/football-stats/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/GIT/teste.estudos/Aleatorios/football-stats/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/GIT/teste.estudos/Aleatorios/football-stats/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import client from\"../../services/client\";import{HomeContainer,HomeStyle,StyledSelect}from\"./styles\";import{ToastContainer,toast}from\"react-toastify\";import{getHeadersRequest}from\"../../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),countries=_useState2[0],setCountries=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selectedCountry=_useState4[0],setSelectedCountry=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),seasons=_useState6[0],setSeasons=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),selectedSeason=_useState8[0],setSelectedSeason=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),leagues=_useState10[0],setLeagues=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),selectedLeague=_useState12[0],setSelectedLeague=_useState12[1];var headersRequest=getHeadersRequest();var fetchCountries=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$client$get,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return client.get(\"/countries\",headersRequest);case 3:_yield$client$get=_context.sent;data=_yield$client$get.data;status=_yield$client$get.status;setCountries(data.response);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchCountries(){return _ref.apply(this,arguments);};}();var fetchSeason=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$client$get2,data,status;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return client.get(\"/leagues/seasons\",headersRequest);case 3:_yield$client$get2=_context2.sent;data=_yield$client$get2.data;status=_yield$client$get2.status;setSeasons(data.response);_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function fetchSeason(){return _ref2.apply(this,arguments);};}();var fetchLeagues=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$client$get3,data,status;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return client.get(\"/leagues?country=\".concat(selectedCountry),headersRequest);case 3:_yield$client$get3=_context3.sent;data=_yield$client$get3.data;status=_yield$client$get3.status;setLeagues(data.response);_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function fetchLeagues(){return _ref3.apply(this,arguments);};}();var fetchTeams=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var _yield$client$get4,data,status;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return client.get(\"/teams?league=\".concat(selectedLeague),headersRequest);case 3:_yield$client$get4=_context4.sent;data=_yield$client$get4.data;status=_yield$client$get4.status;setLeagues(data.response);_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function fetchTeams(){return _ref4.apply(this,arguments);};}();console.log(selectedCountry);useEffect(function(){fetchCountries();fetchSeason();},[]);useEffect(function(){selectedCountry&&fetchLeagues();},[selectedCountry]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(HomeStyle,{children:/*#__PURE__*/_jsxs(HomeContainer,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Selecione um pa\\xEDs\",/*#__PURE__*/_jsxs(StyledSelect,{onChange:function onChange(_ref5){var target=_ref5.target;return setSelectedCountry(target.value);},children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\",children:\"Selecione\"}),countries===null||countries===void 0?void 0:countries.map(function(country){return/*#__PURE__*/_jsx(\"option\",{value:country.name,children:country.name});})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Selecione uma temporada\",/*#__PURE__*/_jsxs(StyledSelect,{disabled:!selectedCountry,onChange:function onChange(_ref6){var target=_ref6.target;return setSelectedSeason(Number(target.value));},children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\",children:\"Selecione\"}),seasons===null||seasons===void 0?void 0:seasons.map(function(season){return/*#__PURE__*/_jsx(\"option\",{value:season,children:season});})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Selecione uma liga\",/*#__PURE__*/_jsxs(StyledSelect,{disabled:!selectedSeason,onChange:function onChange(_ref7){var target=_ref7.target;return setSelectedLeague(target.value);},children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\",children:\"Selecione\"}),leagues===null||leagues===void 0?void 0:leagues.map(function(_ref8){var league=_ref8.league;return/*#__PURE__*/_jsx(\"option\",{value:league.id,children:league.name});})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Selecione um time\",/*#__PURE__*/_jsx(StyledSelect,{disabled:!selectedLeague,children:/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\",children:\"Selecione\"})})]})})]})})]});}export default Home;","map":{"version":3,"names":["useEffect","useState","client","HomeContainer","HomeStyle","StyledSelect","ToastContainer","toast","getHeadersRequest","Home","countries","setCountries","selectedCountry","setSelectedCountry","seasons","setSeasons","selectedSeason","setSelectedSeason","leagues","setLeagues","selectedLeague","setSelectedLeague","headersRequest","fetchCountries","get","data","status","response","console","error","fetchSeason","fetchLeagues","fetchTeams","log","target","value","map","country","name","Number","season","league","id"],"sources":["C:/GIT/teste.estudos/Aleatorios/football-stats/src/pages/Home/Home.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport client from \"../../services/client\";\r\nimport { HomeContainer, HomeStyle, StyledSelect } from \"./styles\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport { getHeadersRequest } from \"../../utils\";\r\nimport { Country, LeagueData } from \"../../interfaces/Home/home\";\r\n\r\nfunction Home() {\r\n  const [countries, setCountries] = useState<Country[]>([]);\r\n  const [selectedCountry, setSelectedCountry] = useState<string>(\"\");\r\n  const [seasons, setSeasons] = useState([]);\r\n  const [selectedSeason, setSelectedSeason] = useState(0);\r\n  const [leagues, setLeagues] = useState([]);\r\n  const [selectedLeague, setSelectedLeague] = useState(\"\");\r\n  const headersRequest = getHeadersRequest();\r\n\r\n  const fetchCountries = async () => {\r\n    try {\r\n      const { data, status } = await client.get(\"/countries\", headersRequest);\r\n      setCountries(data.response);\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");\r\n    }\r\n  };\r\n\r\n  const fetchSeason = async () => {\r\n    try {\r\n      const { data, status } = await client.get(\"/leagues/seasons\", headersRequest);\r\n      setSeasons(data.response);\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");\r\n    }\r\n  };\r\n\r\n  const fetchLeagues = async () => {\r\n    try {\r\n      const { data, status } = await client.get(\r\n        `/leagues?country=${selectedCountry}`,\r\n        headersRequest\r\n      );\r\n      setLeagues(data.response);\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");\r\n    }\r\n  };\r\n\r\n  const fetchTeams = async () => {\r\n    try {\r\n      const { data, status } = await client.get(`/teams?league=${selectedLeague}`, headersRequest);\r\n      setLeagues(data.response);\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error(\"Ops. Ocorreu um erro ao buscar os países. Tente novamente\");\r\n    }\r\n  };\r\n\r\n  console.log(selectedCountry);\r\n\r\n  useEffect(() => {\r\n    fetchCountries();\r\n    fetchSeason();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    selectedCountry && fetchLeagues();\r\n  }, [selectedCountry]);\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer />\r\n      <HomeStyle>\r\n        <HomeContainer>\r\n          <div>\r\n            <label>\r\n              Selecione um país\r\n              <StyledSelect onChange={({ target }) => setSelectedCountry(target.value)}>\r\n                <option selected value=\"\">\r\n                  Selecione\r\n                </option>\r\n                {countries?.map((country: Country) => {\r\n                  return <option value={country.name}>{country.name}</option>;\r\n                })}\r\n              </StyledSelect>\r\n            </label>\r\n          </div>\r\n          <div>\r\n            <label>\r\n              Selecione uma temporada\r\n              <StyledSelect\r\n                disabled={!selectedCountry}\r\n                onChange={({ target }) => setSelectedSeason(Number(target.value))}\r\n              >\r\n                <option selected value=\"\">\r\n                  Selecione\r\n                </option>\r\n                {seasons?.map((season: number) => {\r\n                  return <option value={season}>{season}</option>;\r\n                })}\r\n              </StyledSelect>\r\n            </label>\r\n          </div>\r\n          <div>\r\n            <label>\r\n              Selecione uma liga\r\n              <StyledSelect\r\n                disabled={!selectedSeason}\r\n                onChange={({ target }) => setSelectedLeague(target.value)}\r\n              >\r\n                <option selected value=\"\">\r\n                  Selecione\r\n                </option>\r\n                {leagues?.map(({ league }: LeagueData) => {\r\n                  return <option value={league.id}>{league.name}</option>;\r\n                })}\r\n              </StyledSelect>\r\n            </label>\r\n          </div>\r\n          <div>\r\n            <label>\r\n              Selecione um time\r\n              <StyledSelect disabled={!selectedLeague}>\r\n                <option selected value=\"\">\r\n                  Selecione\r\n                </option>\r\n              </StyledSelect>\r\n            </label>\r\n          </div>\r\n        </HomeContainer>\r\n      </HomeStyle>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}