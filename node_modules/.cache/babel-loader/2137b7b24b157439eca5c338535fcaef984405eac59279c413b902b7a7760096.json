{"ast":null,"code":"import _regeneratorRuntime from\"C:/GIT/teste.estudos/Aleatorios/football-stats/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/GIT/teste.estudos/Aleatorios/football-stats/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/GIT/teste.estudos/Aleatorios/football-stats/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{LoginButton,LoginCard,LoginContainer,StyledInput,LoginTitle}from\"./styles\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import client from\"../../services/client\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var navigate=useNavigate();var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$client$get,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(token){_context.next=2;break;}return _context.abrupt(\"return\",toast.error(\"Ops! Api key inv치lida.\"));case 2:setIsLoading(true);_context.next=5;return client.get(\"/status\",{headers:{\"x-rapidapi-key\":token,\"x-rapidapi-host\":\"v3.football.api-sports.io\"}});case 5:_yield$client$get=_context.sent;data=_yield$client$get.data;status=_yield$client$get.status;if(!(status!==200)){_context.next=11;break;}setIsLoading(false);return _context.abrupt(\"return\",toast.error(\"Ops! Ocorreu um erro. Tente novamente mais tarde\"));case 11:if(!(data.results<1||data.errors.length>0)){_context.next=14;break;}setIsLoading(false);return _context.abrupt(\"return\",toast.error(\"Ops! Api key inv치lida.\"));case 14:localStorage.setItem(\"user_token\",JSON.stringify({token:token}));return _context.abrupt(\"return\",navigate(\"/home\"));case 16:case\"end\":return _context.stop();}}},_callee);}));return function login(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(LoginContainer,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LoginTitle,{children:\"Football Stats\"}),/*#__PURE__*/_jsxs(LoginCard,{children:[/*#__PURE__*/_jsx(StyledInput,{placeholder:\"Api Key\",onChange:function onChange(_ref2){var target=_ref2.target;return setToken(target.value);}}),isLoading?/*#__PURE__*/_jsx(LoginButton,{children:\"Carregando...\"}):/*#__PURE__*/_jsx(LoginButton,{onClick:function onClick(){return login();},children:\"Login\"})]})]})})]});};export default Login;","map":{"version":3,"names":["LoginButton","LoginCard","LoginContainer","StyledInput","LoginTitle","ToastContainer","toast","client","useState","useNavigate","Login","token","setToken","isLoading","setIsLoading","navigate","login","error","get","headers","data","status","results","errors","length","localStorage","setItem","JSON","stringify","target","value"],"sources":["C:/GIT/teste.estudos/Aleatorios/football-stats/src/pages/Login/Login.tsx"],"sourcesContent":["import { LoginButton, LoginCard, LoginContainer, StyledInput, LoginTitle } from \"./styles\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport client from \"../../services/client\";\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  const [token, setToken] = useState<string>(\"\");\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n  const navigate = useNavigate();\r\n\r\n  const login = async () => {\r\n    if (!token) {\r\n      return toast.error(\"Ops! Api key inv치lida.\");\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    const { data, status } = await client.get(\"/status\", {\r\n      headers: {\r\n        \"x-rapidapi-key\": token,\r\n        \"x-rapidapi-host\": \"v3.football.api-sports.io\",\r\n      },\r\n    });\r\n\r\n    if (status !== 200) {\r\n      setIsLoading(false);\r\n      return toast.error(\"Ops! Ocorreu um erro. Tente novamente mais tarde\");\r\n    }\r\n\r\n    if (data.results < 1 || data.errors.length > 0) {\r\n      setIsLoading(false);\r\n      return toast.error(\"Ops! Api key inv치lida.\");\r\n    }\r\n\r\n    localStorage.setItem(\"user_token\", JSON.stringify({ token }));\r\n    return navigate(\"/home\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer />\r\n      <LoginContainer>\r\n        <div>\r\n          <LoginTitle>Football Stats</LoginTitle>\r\n          <LoginCard>\r\n            <StyledInput\r\n              placeholder=\"Api Key\"\r\n              onChange={({ target }) => setToken(target.value)}\r\n            ></StyledInput>\r\n            {isLoading ? (\r\n              <LoginButton>Carregando...</LoginButton>\r\n            ) : (\r\n              <LoginButton onClick={() => login()}>Login</LoginButton>\r\n            )}\r\n          </LoginCard>\r\n        </div>\r\n      </LoginContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"4ZAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,cAAc,CAAEC,WAAW,CAAEC,UAAU,KAAQ,UAAU,CAC1F,OAASC,cAAc,CAAEC,KAAK,KAAQ,gBAAgB,CACtD,MAAO,uCAAuC,CAC9C,MAAOC,OAAM,KAAM,uBAAuB,CAC1C,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,6IAE/C,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB,cAA0BF,QAAQ,CAAS,EAAE,CAAC,wCAAvCG,KAAK,eAAEC,QAAQ,eACtB,eAAkCJ,QAAQ,CAAU,KAAK,CAAC,yCAAnDK,SAAS,eAAEC,YAAY,eAC9B,GAAMC,SAAQ,CAAGN,WAAW,EAAE,CAE9B,GAAMO,MAAK,4FAAG,0KACPL,KAAK,yDACDL,KAAK,CAACW,KAAK,CAAC,wBAAwB,CAAC,SAG9CH,YAAY,CAAC,IAAI,CAAC,CAAC,sBAEYP,OAAM,CAACW,GAAG,CAAC,SAAS,CAAE,CACnDC,OAAO,CAAE,CACP,gBAAgB,CAAER,KAAK,CACvB,iBAAiB,CAAE,2BACrB,CACF,CAAC,CAAC,wCALMS,IAAI,mBAAJA,IAAI,CAAEC,MAAM,mBAANA,MAAM,MAOhBA,MAAM,GAAK,GAAG,2BAChBP,YAAY,CAAC,KAAK,CAAC,CAAC,gCACbR,KAAK,CAACW,KAAK,CAAC,kDAAkD,CAAC,eAGpEG,IAAI,CAACE,OAAO,CAAG,CAAC,EAAIF,IAAI,CAACG,MAAM,CAACC,MAAM,CAAG,CAAC,2BAC5CV,YAAY,CAAC,KAAK,CAAC,CAAC,gCACbR,KAAK,CAACW,KAAK,CAAC,wBAAwB,CAAC,UAG9CQ,YAAY,CAACC,OAAO,CAAC,YAAY,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEjB,KAAK,CAALA,KAAM,CAAC,CAAC,CAAC,CAAC,gCACvDI,QAAQ,CAAC,OAAO,CAAC,yDACzB,kBA1BKC,MAAK,0CA0BV,CAED,mBACE,wCACE,KAAC,cAAc,IAAG,cAClB,KAAC,cAAc,wBACb,oCACE,KAAC,UAAU,6BAA4B,cACvC,MAAC,SAAS,yBACR,KAAC,WAAW,EACV,WAAW,CAAC,SAAS,CACrB,QAAQ,CAAE,4BAAGa,OAAM,OAANA,MAAM,OAAOjB,SAAQ,CAACiB,MAAM,CAACC,KAAK,CAAC,EAAC,EACpC,CACdjB,SAAS,cACR,KAAC,WAAW,4BAA4B,cAExC,KAAC,WAAW,EAAC,OAAO,CAAE,yBAAMG,MAAK,EAAE,EAAC,mBACrC,GACS,GACR,EACS,GAChB,CAEP,CAAC,CAED,cAAeN,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}